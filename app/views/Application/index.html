#{extends 'main.html' /}
#{set title:'Collecterest' /}

<!-- ParentView -->
<div class="row white lighten-5">
<!-- Left Colum -->
<div class="col s2">
	<div class="navbar-fixed">
		<div class="nav-wrapper">
			<div class="left_colum col s2">
				<div class="row card-panel teal lighten-3">
					<div class="row center-align user-contents">
						#{if user}
							<img src="${user.iconUrl}" class="user-icon">
							<span class="white-text user-name">${user.name}</span><br>
						#{/if}
					</div>
 					<div class="row white-text">
						<div class="divider"></div>
						<div class="section">
							<span>見てるひと</span>
						</div>
						<div class="divider"></div>
						#{if Group}
							<!-- #{list} #{/list} -->
						#{/if}
						#{else}
							<p>いません</p>
						#{/else}
						<div class="divider"></div>
					</div>

					<!-- <a class="waves-effect waves-teal btn-flat white-text">invite</a> -->
					<a class="white-text user-btn-logout" href="#" onclick="logout(); return false;">ログアウト</a>
			</div>
		</div> <!-- Left Colum end -->
		</div>
	</div>
</div>

<!-- RightColum -->
	<div class="col s10">
		<div class="row">
	#{if flash.error}
    	<p class="error" style="display:none">${flash.error}</p>
	#{/if}
			<form class="row" action="@{Application.submit()}">
				<div class="input-field">
					<input id="share_url" type="text" class="validate" name="inputUrl">
					<label for="share_url">URLを共有</label>
				</div>
				<div class="row">
					<button class="btn waves-effect waves-light" type="submit" name="action">投稿</button>
				</div>
			</form>
		</div>

<!-- Card View -->
		#{list items:articles, as:'article'}
			<div class="card small hoverable">
				<div class="card-image left">
				<a class="view_link" href="${article.url}" target="_blank" data-id="${article.id}">
					<img src="${article.imageUrl}">
				</a>
				</div>
				<div class="card-content">
					<a class="view_link" href="${article.url}" target="_blank" data-id="${article.id}"><span class="card-title black-text">${article.title}</span></a>
					<p class="card-description">${article.description}</p>
				</div>
				<div class="card-action">
					<div class="col s2">
						<div class="left"><i class="material-icons small">visibility</i></div>
						<span class="count view" data-id="${article.id}">${article.view}</span>
					</div>
					<div class="col s2">
						<button class="black-text liked_button left" data-id="${article.id}"><i class="material-icons small">thumb_up</i></button>
						<span class="count liked" data-id="${article.id}">${article.liked}</span>
					</div>
					<div class="col s2">
						<button class="black-text delete_button" data-id="${article.id}"><i class="material-icons small">delete</i></button>
					</div>
				</div>
			</div>
		#{/list}
	</div> <!-- Right Colum -->
</div> <!-- Parent View -->
